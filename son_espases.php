<?php

// Notificar todos los errores de PHP (ver el registro de cambios)
error_reporting(E_ALL);

// If you installed via composer, just use this code to requrie autoloader on the top of your projects.
require 'vendor/autoload.php';

// Using Medoo namespace
use Medoo\Medoo;
use GuzzleHttp\Psr7;
use GuzzleHttp\Exception\RequestException;


// Initialize
$db = new Medoo([
    // 'driver' => 'mysql',
    'database_type' => 'mysql',
    'database_name' => 'espases_db',
    'server' => 'localhost',
    'charset' => 'utf8',
    'username' => 'root',
    'password' => ''
]);

$ids = [
  1547, 2364, 2498, 1707, 2529, 2414, 2411, 1541, 2409, 2406, 2403, 2426, 2427, 1967, 2029, 2035, 2034, 1965, 1964, 1713, 1711, 1710, 1708, 1673, 1670, 2031, 1968, 1966, 1938,
  1734, 1732, 1721, 1719, 1715, 1714, 1799, 1797, 1729, 1727, 1881, 1879, 2030, 1940, 1686, 1697, 2066, 2307, 2397, 2526, 2525, 2518, 2395, 2394, 1538, 2311, 2310, 2589, 2514,
  2049, 2037, 1860, 1545, 1544, 2374, 2582, 2565, 2588, 2543, 2551, 2535, 2481, 2455, 2496, 2533, 2556, 2493, 2491, 2436, 2083, 1973, 2285, 1736, 2354, 2352, 2351, 2044, 1812,
  1675, 1746, 2363, 1747, 2516, 2513, 2017, 1877, 2025, 2018, 1833, 2437, 2060, 1972, 1809, 1962, 2312, 1892, 1735, 1724, 1712, 1733, 1728, 2041, 1683, 1898, 1904, 2466, 2464,
  1793, 2391, 2503, 2530, 1702, 1692, 1700, 1689, 2521, 2517, 2515, 2522, 2495, 2519, 1698, 1699, 1701, 1905, 1903, 1893, 1848, 2587, 2545, 2434, 2563, 2385, 2421, 2381, 2586,
  1971, 1682, 1811, 1814, 2042, 1679, 2384, 1688, 1625, 1865, 1863, 1862, 1844, 1839, 1837, 2343, 2073, 1912, 1908, 2086, 1910, 1767, 2279, 1866, 1843, 2010, 2002, 1945, 1869,
  1829, 1827, 1706, 1911, 2022, 2009, 2006, 1872, 2021, 2011, 2007, 1941, 1873, 1832, 1818, 2026, 2019, 1947, 1875, 1834, 1819, 2027, 2015, 2014, 1951, 1876, 1831, 1822, 2079,
  2058, 1993, 2333, 1961, 2332, 2328, 2319, 1936, 1922, 1959, 2088, 1794, 1778, 1885, 1774, 1935, 1659, 1644, 1615, 1614, 1613, 1612, 1803, 1963, 1937, 1907, 2330, 2370, 1955,
  2078, 1755, 1817, 1948, 2072, 2001, 1985, 1796, 1953, 2051, 1987, 2067, 2065, 1891, 1890, 1888, 1886, 1882, 1772, 1770, 1769, 1768, 1766, 1762, 1759, 1884, 1883, 1758, 1756,
  2315, 2350, 2349, 2323, 2053, 1980, 1975, 1900, 1899, 1854, 1852, 1722, 1889, 1887, 2334, 1629, 1990, 1902, 1901, 1918, 2074, 2000, 1983, 1920, 1792, 1782, 2077, 1909, 1765,
  2020, 2008, 2005, 1943, 1871, 1824, 1815, 2314, 1751, 1737, 2270, 1921, 2255, 2068, 2040, 1952, 1744, 1913, 2344, 1780, 1788, 1784, 2267, 2047, 2036, 1858, 1776, 1738, 1546,
  1543, 1542, 1752, 2004, 1949, 1870, 1825, 2094, 1989, 1754, 1633, 1631, 2338, 2283, 2313, 2092, 2087, 2375, 1785, 2336, 2335, 2052, 1914, 2071, 1926, 2331, 1779, 1977, 1648,
  1777, 1775, 2069, 1999, 1982, 1917, 1795, 1790, 2346, 2345, 2347, 2024, 2013, 2012, 1950, 1874, 1820, 1787, 2039, 1944, 1763, 2372, 2090, 2256, 2076, 1988, 1954, 1745, 1868,
  1855, 1841, 1835, 1864, 1867, 1846, 2061, 1896, 1823, 1816, 1753, 1992, 1916, 1550, 1781, 1845, 1861, 1838, 1925, 2316, 2339, 2272, 2095, 2093, 2091, 2084, 2080, 2070, 2032,
  1994, 1919, 1880, 1857, 1842, 1828, 1789, 1757, 1731, 1726, 1723, 1717, 1716, 1705, 1703, 1687, 1678, 1677, 1669, 1668, 1661, 1651, 1649, 1641, 1635, 1997, 1786, 1704, 1946,
  2003, 1691, 2449, 2578, 2505, 2555, 2419, 2292, 1800, 1685, 1730, 2536, 2544, 2539, 1694, 1709, 1660, 1636, 1624, 2033, 1969, 1934, 1801, 1725, 1676, 1671, 1619, 1616, 2028,
  1970, 1939, 1878, 1805, 1666, 1658, 1654, 1646, 1643, 1640, 1634, 1806, 1628, 2417, 2420, 2396, 2383, 2467, 2501, 2508, 2575, 1681, 1680, 2089, 2329, 1956, 1923, 2564, 2542,
  2567, 2554, 2553, 1773, 2576, 2502, 2326, 2325, 2327, 2371, 2368, 2263, 2260, 2264, 2373, 2401, 2398, 2399, 2615, 2458, 2456, 2571, 2537, 2432, 2457, 2612, 2609, 2534, 2472,
  2448, 2445, 2447, 2489, 2452, 2475, 2479, 2451, 2483, 2453, 2450, 2548, 2566, 2506, 2474, 2469, 2473, 2569, 2507, 2477, 2470, 2478, 2471, 2538, 1690, 1695, 1693, 2415, 2413,
  2412, 2410, 2408, 2407, 2405, 2404, 2305, 2301, 2295, 2294, 2583, 2580, 2585, 2581, 2584, 2023, 2016, 2055, 2075, 2320, 2258, 1995, 1996, 2348, 2418, 1696, 2480, 2579, 2064,
  1749, 2062, 1748, 1743, 2378, 2276, 2369, 2059, 2376, 2082, 2274, 2269, 2056, 2050, 1998, 1991, 1958, 1957, 1927, 1924, 2085, 2038, 2540, 2509, 2486, 2433, 2593, 2484, 2487,
  2446, 2546, 2435, 2438, 2531, 2494, 1684, 2379, 2046, 2045, 1979, 1978, 1929, 2048, 1930, 1928, 1642, 1639, 1626, 1621, 1617, 2377, 2324, 2322, 1976, 1960, 1933, 1932, 1931,
  1853, 1851, 1850, 1849, 1720, 1718, 1674, 1672, 1664, 1662, 1627, 1623, 1622, 1620, 1618, 1802, 1667, 1652, 1657, 1807, 1804, 1656, 1653, 1650, 1645, 1638, 1637, 1632, 1630,
  1808, 1663, 1655, 1647, 2318, 2321, 1783, 2366, 1549, 1540, 1537, 2428, 2367, 2511, 2592, 2611, 2541, 2614, 2608, 2590, 2610, 2429, 2613, 2591, 2616, 2547, 2340, 2342, 2297,
  2361, 2360, 2359, 2358, 2357, 2355, 2356, 2380, 1539, 2443, 2402, 2400, 1897, 1895, 1894, 1771, 1764, 2423, 2422, 2063, 2520, 2390, 2389, 2388, 2387, 1856, 1836, 2552, 2504,
  2572, 2570, 2337, 2317, 2528, 2523, 2488, 2485, 2468, 2560, 2527, 2524, 2463, 2561, 2562, 2465, 2596, 2532, 2430, 2549, 2416, 1536, 2441, 2439, 2454, 2573, 1739, 1742, 1741,
  1740, 2309, 2492, 1984, 1981, 2510, 1813, 1906, 2043, 1974, 2499, 2365, 2500, 2290, 2288, 2574, 2577, 2386, 2512, 2442, 2444, 2490, 2568, 2277, 2382, 2300, 2462, 2459, 2559,
  2558, 2557, 2461, 2460, 2594, 2595, 2392, 2393, 2341, 2497, 2550, 2482, 2425, 2424, 2081, 1942, 2054, 2353, 1830, 1821, 1318, 1316, 1304, 1322, 1324, 1309, 1306, 1320, 1313,
  1312, 1311, 1307, 1314, 1315, 1321, 1319, 1310, 1308, 1305, 1039, 1317 ];

// 9 SALA
// 10 ZONA

echo "<pre>";

foreach ($ids as $id) {

  $zona = $db->query("SELECT `content` FROM `values` WHERE `item_id` = $id AND field_id = 10")->fetch();
  $zona = $zona['content'];

  if ($zona == 0) {

    $data = $db->update("values", [ "content" => "O" ], [
      "item_id" => $id,
      "field_id" => 10
    ]);

    echo "id:$id Zona cero cambiada a la letra 'O'!<br>";

  } else {

    $sala = $db->query("SELECT `content` FROM `values` WHERE `item_id` = $id AND field_id = 9")->fetch();
    $sala = $sala['content'];

    $data = $db->update("values", [ "content" => $zona ], [
      "item_id" => $id,
      "field_id" => 9
    ]);

    if ($data->rowCount()) { echo "Sala id:$id cambiada de $sala a $zona<br>"; }

    $data = $db->update("values", [ "content" => $sala ], [
      "item_id" => $id,
      "field_id" => 10
    ]);

    if ($data->rowCount()) { echo "Zona id:$id cambiada de $zona a $sala<br>"; }
  }

  echo "-<br>";

} // End foreach

exit();
